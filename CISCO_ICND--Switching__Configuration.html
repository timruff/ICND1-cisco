<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Switching : Configuration</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>Switching : Configuration</h1><br/><strong>Plan</strong><br />• Running-config et startup-config<br /><br />• Nom d&#39;hôte<br /><br />• Configuration des interfaces<br /><br />• Configuration IP<br />   ◇ Passerelle par défaut<br /><br />• Configuration des interfaces de commutation<br /><br />• Sécurité<br />   ◇ Mot de passe<br />   ◇ SSH<br />   ◇ Sécurisation des ports<br />      ▪ Sécurisation des ports : configuration<br />      ▪ Sécurisation des ports : adresses<br /><br /><strong>Running config et startup config</strong><br />• deux espaces distincts pour stocker la configuration<br />   ◇ mémoire vive (RAM)<br />      ▪ running-config<br />      ▪ configuration actuellement utilisée<br />      ▪ perdues après redémarrage<br />   ◇ mémoire non volatile (NVRAM)<br />      ▪ startup-config<br />      ▪ configuration chargée au démarrage<br /><br />• pour afficher la configuration<br /># show running-config<br /># show startup-config<br /><br />• pour enregistrer la configuration actuelle (running-config)<br /># write<br />- ou<br /># copy running-config startup-config<br /><br />Nom d&#39;hôte<br />• en mode de configuration globale<br />(config)# hostname newhostname<br /><br /><strong>Configuration des interface</strong><br />• mode interface<br />(config)# interface type <em>number</em><br />(config-if)#<br /><br />-Exemple<br />(config)# interface FastEthernet 0/1<br /><br />• Il est possible de configurer en une seule fois un ensemble d&#39;interface<br />-Exemple<br />(config)# interface range FastEthernet 0/10 - 20<br />(config-if-range)#<br /><br /><strong>Configuration IP</strong><br />• nécessaire pour accéder au commutateur via le réseau<br />   ◇ telnet, ssh, interface web<br />• hors, un commutateur n&#39;est pas fait pour, normalement, agir sur la couche 3<br />   ◇ on va donc utiliser une interface virtuelle VLAN1 (cf cours suivants)<br />      ▪ dans le VLAN par défaut<br />(config)#interface vlan 1<br />   ◇ nons configurons ensuite l&#39;adresse ip<br />      ▪ statique<br />(config-if)#ip address 192.168.1.200 255.255.255.0<br />      ▪ ou dynamique<br />(config-if)#ip address dhcp<br />      ▪ puis on active l&#39;interface<br />(config-if)#no shutdown<br /><br /><strong>Passerelle par défaut</strong><br />• configurer une passerelle par défaut se fera dans la configuration globale<br />(config)#ip default-gateway 192.168.1.1<br /><br /><strong>Configuration des interfaces de commutation</strong><br />• Par défaut, la vitesse et le mode duplex d&#39;une interface sont négociés automatiquement avec le périphérique connecté<br />   ◇ il est cependant possibe de focer ces valeurs<br />(config)#interface fast Ethernet 0/1<br />(config-if)#speed 10<br />(config-if)#duplex half<br />(config-if)#end<br />• Pour plus de clarté, il est également possible de renseigner une descirption pour chaque interface<br />(config-if)#description votre description ici<br /><br /><strong>Securité</strong><br />• Par défaut, votre commutateur est “convenablement” sécurisé<br />   ◇ du moment qu&#39;il rest inaccessible physiquement<br />      ▪ enfermé dans une salle appropriée<br />   ◇ seul un accès console est aitorisé par défaut<br />      ▪ aucune authentification requise<br />      ▪ accès complet à toutes les commandes<br />         - pas de mot de passe pour le mode Enable<br /><br />• Il peu cependant être nécessaire de mettre en palce un mot de passe pour la connexion<br />   ◇ et d&#39;activer le telnet et le SSH<br /><br /><strong>Mot de passe</strong><br />• deux types<br />   ◇ console<br />   ◇ Virtual Terminal -vty (pour le telnet)<br />      ▪ de 0 à 15 (ou de 0 à 4 pour les modèles les plus anciens)<br /><br />• aucun nom d&#39;utilisateur<br /><br />• Exemples de configuration :<br />   ◇ nécessite de passer en mode configuration à partir du terminal<br /><br />&gt; enable<br /># configure terminal<br /><br />• Port console 0<br />(config)# line console 0<br />(config-line)# password faith<br />(config-line)# login<br /><br />• Tout les vty<br />(config)# line vty 0 15<br />(config-line)# password love<br />(config-line)# login<br /><br /><strong>SSH</strong><br />• nécessite l&#39;usage de noms d&#39;utilisateurs locaux<br />(config)# line vty 0 15<br />(config-line)#login local<br /><br />• activer le ssh en plus du telnet<br />   ◇ seul le telnet est activé par défaut<br />(config-line)#transport input telnet ssh<br /><br />• ajout d&#39;une ou plusieurs paire(s) utilisateur/mot de passe<br />(config)#username name password <em>pwd</em><br /><br />• configurer un nom de domaine<br />(config)#ip domain-name example.com<br /><br />• générer une paire clé publique / privée ainsi qu&#39;une clé de chiffrement partagée<br />(config)#crypto key generate rsa<br /><br /><strong>Sécurisation des ports</strong><br />• évite l&#39;intrusion d&#39;un attaquant sur le réseau<br />   ◇ en explicant la machine prévue pour se connecter au<br /><br />• pas à pas<br />   ◇ passer en mode de configuration de l&#39;interface<br />(config)#interface FastEthernet 0/1<br />   ◇ passer l&#39;interface en mode “access”<br />(config)#switchport mode access<br />   ◇ activer la sécurisation de port sur cette interface<br />(config-if)#switchport port-security<br /><br /><strong>Sécurisation des ports : configuration</strong><br />• indiquer le nombre maximum d&#39;adresses MACs sédcurisées sur cette interface<br />   ◇ Optionnel - 1 par défaut<br />(config-if)#switchport port-security maximum<em> nombre</em><br /><br />• indiquer l&#39;action à réaliser à la recption d&#39;une trame non conforme<br />   ◇ Optionnel - shutdown par défaut<br />(config-if)#switchport port-security violation {protect | restrict | shudown}<br />   ◇ protect : blocage des trames sans message d&#39;avertissement<br />   ◇ restrict : blocage des trames avec avertissement<br />      ▪ messege syslog, trap snmp et incémentation du compteur d&#39;erreur<br />   ◇ shutdown : désactivation de l&#39;interface<br />      ▪ avec blocage des trames et avertissement<br /><br /><strong>Sécurisation des ports : adresses</strong><br />• 3 possibilitées !<br />   ◇ configuration manelle (explicite)<br />   ◇ apprentissage dynamique<br />      ▪ ne peuvent être enregistrées<br />   ◇ sticky : adresses apprises dynamiquement et enregistrées dans la running-config<br />      ▪ peuvent alors être enregistrées dans la startup-config<br />      ▪ mode désactivé par défaut<br />      ▪ lors de l&#39;activation de ce mode, toute adresse apprise dynamiquement est convertie en adresse “sticky”<br /><br />• spécifier explicitement une nouvelle adresse MAC autorisée<br />   ◇ si il reste un certian nombre d&#39;adresses MAC autorisées possible non définies, celles-ci seront apprises dynamiquement<br />(config-if)#switchport port-security mac-address <em>addresse-mac </em><br />   ◇ activer le mode “sticky”<br />(config-if)# switchport port-security mac-address sticky<br />  <br /><strong>Ce qu&#39;on a couvert</strong><br />• L&#39;essentiel de la configuration d&#39;un switch Cisco IOS.<br />   ◇ comprendre le système de configuration<br />   ◇ paramètres globaux<br />      ▪ nom d&#39;hôte<br />      ▪ adresse IP<br />      ▪ passerelle par défaut<br />   ◇ configuration des interfaces<br />   ◇ sécurité<br />      ▪ protection par mot de passe<br />      ▪ SSH<br />      ▪ sécurisation des ports<br /></div>
</body>
</html>
