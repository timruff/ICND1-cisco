<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Service IP : DHCP</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>Service IP : DHCP</h1><br/><strong>Plan</strong><br />• Dynamic Host Configuration Protocol<br />• Fonctionnement<br />• Agent relais DHCP<br />• Rappel : interface cliente DHCP<br />• IOS DHCP Server : mise en place<br />• IOS DHCP Server : baux<br />• IOS DHCP Server : paramètres<br />• Commandes d&#39;information<br /><br /><strong>Dynamic Host Configuration Protocol</strong><br />• Octobre 1993 : première définition (RFC 1531)<br />   ◇ comme extension de BOOTP (Boostrap Protocol)<br />      ▪ couvre l&#39;ensembre des configuration IP<br />         - adresse IP, masque, passerelle par défaut<br />         - adresses des servers de noms (DNS et NBNS (WINS))<br /><br />• modifié et complété par la RFC 2131 (Mars 1997)<br />   ◇ référence ipv4 actuelle<br /><br />• adapté à l&#39;ipv6 depuis juillet 2003 (RFC 3315)<br /><br /><strong>Fonctionnement</strong><br />• DHCP DISCOVER<br />   ◇ broadcast (255.255.255.255)<br />   ◇ port 67<br /><br />• DHCP OFFER<br />   ◇ réponse du serveur ayant réçu la requête<br />      ▪ proposant une adresse IP et un masqie<br />      ▪ et inquant l&#39;adresse IP du serveur<br />   ◇ port 68<br /><br />• DHCP REQUEST<br />   ◇ demande d&#39;assignation de l&#39;adresse proposée<br />      ▪ et l&#39;envoi des valeurs des paramètres<br /><br />• DHCP ACK<br />   ◇ accusé de réception   <br />   ◇ assigne l&#39;adresse IP pour une durée définie<br />      ▪ ainsi que d&#39;autres paramètres éventuels (passerelle par défaut, DNS, WINS)<br /><br /><img src="images/28-1.png" alt="images/28-1.png" /><br /><br /><strong>Agent relais DHCP</strong><br />• les datagrammes DHCP sont limités à un domaine de broadcast<br />   ◇ nécessite donc des serveur DHCP ou des serveurs relais sur chaque segment<br />   ◇ transforme les requêtes mutlicast en de l&#39;unicast<br /><br />• défini par la RFC 1542 <br /><br /><strong>Rappel : interface cliente DHCP</strong><br /><br />(config-if)# ip address dhcp<br /><br /><strong>IOS DHCP Server : mise en place</strong><br />• création d&#39;un pool d&#39;adresse<br />(config)# ip dhcp <em>pool pool-ID</em><br />(dhcp-confg)#<br />   ◇ pool-ID : chaîne de caractères identifiant le pool d&#39;adreses<br /><br />• définition du sous-réseau supporté<br />(dhcp-config)# network 192.168.2.0 255.255.255.0  <br /><br /><strong>IOS DHCP Server : baux</strong><br />• définition de la durée de bail<br />(dhcp-config)# lease days hours minutes<br /><br /><strong>IOS DHCP Server : paramètres</strong><br />• définition du/des routeur(s) par défaut<br />(dhcp-config)# default-router <em>adresse1 adresse2</em> ...<br /><br />• adresses du/des serveur(s) DNS<br />(dhcp-config)# dns-server <em>adresse1 adresse2</em> ...<br /><br />• nom de domaine DNS<br />(dhcp-config)# domain-name <em>name</em><br /><br /><strong>Commandes d&#39;information</strong><br />• informations d&#39;état de chacun des baux alloués<br /># show ip dhcp binding<br /><br />• statistiques et intervales d&#39;adresses d&#39;un pool d&#39;adresses<br /># show ip dhcp pool [<em>poolname</em>]<br /><br />• statistiques du serveur DHCP<br /># show ip dhcp server statistics<br /><br />• afficher les conflits<br /># show ip dhcp conflict<br /><br /><strong>Ce qu&#39;on a couvert</strong><br />• DHCP<br />   ◇ fonctionnement<br />   ◇ configuration du client<br />   ◇ configuration du serveur<br />      ▪ pool d&#39;adresses<br />      ▪ paramètres<br />      ▪ durée de bail</div>
</body>
</html>
