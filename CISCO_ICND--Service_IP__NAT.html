<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Service IP : NAT</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>Service IP : NAT</h1><br/><strong>Plan</strong><br />• Introduction<br />• Types de NATing<br />• Réseau privé / publique<br />• NAT statique<br />• NAT Dynamique<br />• NAT dynamique PAT<br />• NAT dynamique PAT pour adresse publique unique<br />• Commandes d&#39;information<br /><br /><strong>Introduction</strong><br />• Traduction d&#39;adresse IP (Network Address Translation)<br />   ◇ faire correspondre une adresse pubique  unique pour un réseau privé<br />   ◇ le nombre d&#39;adresses publiques étant limité<br />      ▪ ex : démarche de demande de bloc d&#39;IP au RIPE NCC via OVH<br /><br />• RFC 1631 - Mai 1994<br /><br /><img src="images/30-1.png" alt="images/30-1.png" /> <br /><br /><strong>Types de NATing</strong><br />• statique<br />   ◇ faire correspondre une adresse publique à une adresse privée<br /><br />• dynamique<br />   ◇ créé dynamiquement las translations dans un pool d&#39;adresses publiques<br /><br />• PAT<br />   ◇ translation basée sur les ports TCP/UDP<br /><br /><strong>Réseau  privé / publique</strong><br />• Première étape de tout type de nating<br />   ◇ le NAT ne prenant effat que quand un paquet est routé de “l&#39;intérieur” ves &quot;l&#39;extérieuré, ou inversement<br />   ◇ il est con nécessaire de définir cet “intérieur” et cet &quot;extérieur<br /><br />• Par interface<br />(config-if)# ip nat {inside|outside} <br /><br /><strong>NAT statique</strong><br />• Faire correspondre une adresse publique à une adresse privée<br />(config)# ip nat inside source static 192.168.1.10 201.55.4.8<br /><br /><strong>NAT Dynamique</strong><br />• Les adresses publiques sont automatiquement choisies dans un pool d&#39;adresse<br /><br />• création du pool d&#39;adrsses<br />(config)# ip nat POOL-NAT-LAN1 201.55.4.1 201.49.10.10 netmask 255.255.255.240<br /><br />• création de l&#39;ACL<br />(config)# access-list 1 eny 192.168.1.10<br />(config)# access-list 1 permit 192.168.1.0 0.0.0.255<br /><br />• activation du NAT<br />(config)# ip nat inside source list 1 pool POOL-NAL-LAN1 <br /><br /><strong>NAT dynamique PAT</strong><br />• nécessaire si le nombre d&#39;adresses publique est plus faible que celu d&#39;adresses privées<br />   ◇ tanslation de port source, afin d&#39;identifier le client<br /><br />• ajouter simplement &quot;overload&quot; à la configuration précédente<br />(config)# ip nat inside souce list 1 pool POOL-NAT-LAN1 overload<br /><br /><strong>NAT dynamique PAT pour adresse publilque unique</strong><br />• Configuration la plus courante sur les réseaux de petite dimension<br />   ◇ une seule adresse IP fixe sur Internet par exemple<br /><br />• Définir un pool d&#39;adresse n&#39;est donc plus adapté<br />   ◇ il suffira alors de de baser sur l&#39;adresses de l&#39;interface “outside”<br />(config)#ip nat inside source list 1 interface serial 0/0 overload <br /><br /><strong>Commande d&#39;information<br /></strong>• Afficher la table de translations<br />   ◇ translations effectuées en accord avec les règles établies<br />#show ip nat translations<br /><br />• Vérifier l&#39;adresse desd paquets reçu sur un routeur<br /># debug ip paquet<br /><br /><strong>Ce qu&#39;on a couvert</strong><br />• Confiugration du NAT sur les routeurs Cisco<br />   ◇ concept<br />   ◇ fonctionnement<br />   ◇ types de NAT<br />   ◇ mise en palce<br />      ▪ NAT statique<br />      ▪ NAT dynamique<br />         - PAT</div>
</body>
</html>
